<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- saved from url=(0084)https://edge.edx.org/asset-v1:UBC+CPSC317-201+2016W2+type@asset+block/a2_2016W2.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
  <meta name="generator" content="HTML Tidy for Mac OS X (vers 31 October 2006 - Apple Inc. build 15.17), see www.w3.org">
  <script src="https://js-agent.newrelic.com/nr-1026.min.js"></script><script type="text/javascript">(window.NREUM||(NREUM={})).loader_config={xpid:"XA4GVl5ACwcBUVdaAA=="};window.NREUM||(NREUM={}),__nr_require=function(t,e,n){function r(n){if(!e[n]){var o=e[n]={exports:{}};t[n][0].call(o.exports,function(e){var o=t[n][1][e];return r(o||e)},o,o.exports)}return e[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e,n){function r(t){try{c.console&&console.log(t)}catch(e){}}var o,i=t("ee"),a=t(12),c={};try{o=localStorage.getItem("__nr_flags").split(","),console&&"function"==typeof console.log&&(c.console=!0,o.indexOf("dev")!==-1&&(c.dev=!0),o.indexOf("nr_dev")!==-1&&(c.nrDev=!0))}catch(s){}c.nrDev&&i.on("internal-error",function(t){r(t.stack)}),c.dev&&i.on("fn-err",function(t,e,n){r(n.stack)}),c.dev&&(r("NR AGENT IN DEVELOPMENT MODE"),r("flags: "+a(c,function(t,e){return t}).join(", ")))},{}],2:[function(t,e,n){function r(t,e,n,r,o){try{d?d-=1:i("err",[o||new UncaughtException(t,e,n)])}catch(c){try{i("ierr",[c,s.now(),!0])}catch(u){}}return"function"==typeof f&&f.apply(this,a(arguments))}function UncaughtException(t,e,n){this.message=t||"Uncaught error with no additional information",this.sourceURL=e,this.line=n}function o(t){i("err",[t,s.now()])}var i=t("handle"),a=t(13),c=t("ee"),s=t("loader"),f=window.onerror,u=!1,d=0;s.features.err=!0,t(1),window.onerror=r;try{throw new Error}catch(l){"stack"in l&&(t(5),t(4),"addEventListener"in window&&t(3),s.xhrWrappable&&t(6),u=!0)}c.on("fn-start",function(t,e,n){u&&(d+=1)}),c.on("fn-err",function(t,e,n){u&&(this.thrown=!0,o(n))}),c.on("fn-end",function(){u&&!this.thrown&&d>0&&(d-=1)}),c.on("internal-error",function(t){i("ierr",[t,s.now(),!0])})},{}],3:[function(t,e,n){function r(t){for(var e=t;e&&!e.hasOwnProperty(u);)e=Object.getPrototypeOf(e);e&&o(e)}function o(t){c.inPlace(t,[u,d],"-",i)}function i(t,e){return t[1]}var a=t("ee").get("events"),c=t(15)(a,!0),s=t("gos"),f=XMLHttpRequest,u="addEventListener",d="removeEventListener";e.exports=a,"getPrototypeOf"in Object?(r(document),r(window),r(f.prototype)):f.prototype.hasOwnProperty(u)&&(o(window),o(f.prototype)),a.on(u+"-start",function(t,e){var n=t[1],r=s(n,"nr@wrapped",function(){function t(){if("function"==typeof n.handleEvent)return n.handleEvent.apply(n,arguments)}var e={object:t,"function":n}[typeof n];return e?c(e,"fn-",null,e.name||"anonymous"):n});this.wrapped=t[1]=r}),a.on(d+"-start",function(t){t[1]=this.wrapped||t[1]})},{}],4:[function(t,e,n){var r=t("ee").get("raf"),o=t(15)(r),i="equestAnimationFrame";e.exports=r,o.inPlace(window,["r"+i,"mozR"+i,"webkitR"+i,"msR"+i],"raf-"),r.on("raf-start",function(t){t[0]=o(t[0],"fn-")})},{}],5:[function(t,e,n){function r(t,e,n){t[0]=a(t[0],"fn-",null,n)}function o(t,e,n){this.method=n,this.timerDuration="number"==typeof t[1]?t[1]:0,t[0]=a(t[0],"fn-",this,n)}var i=t("ee").get("timer"),a=t(15)(i),c="setTimeout",s="setInterval",f="clearTimeout",u="-start",d="-";e.exports=i,a.inPlace(window,[c,"setImmediate"],c+d),a.inPlace(window,[s],s+d),a.inPlace(window,[f,"clearImmediate"],f+d),i.on(s+u,r),i.on(c+u,o)},{}],6:[function(t,e,n){function r(t,e){d.inPlace(e,["onreadystatechange"],"fn-",c)}function o(){var t=this,e=u.context(t);t.readyState>3&&!e.resolved&&(e.resolved=!0,u.emit("xhr-resolved",[],t)),d.inPlace(t,v,"fn-",c)}function i(t){y.push(t),h&&(g=-g,x.data=g)}function a(){for(var t=0;t<y.length;t++)r([],y[t]);y.length&&(y=[])}function c(t,e){return e}function s(t,e){for(var n in t)e[n]=t[n];return e}t(3);var f=t("ee"),u=f.get("xhr"),d=t(15)(u),l=NREUM.o,p=l.XHR,h=l.MO,m="readystatechange",v=["onload","onerror","onabort","onloadstart","onloadend","onprogress","ontimeout"],y=[];e.exports=u;var w=window.XMLHttpRequest=function(t){var e=new p(t);try{u.emit("new-xhr",[e],e),e.addEventListener(m,o,!1)}catch(n){try{u.emit("internal-error",[n])}catch(r){}}return e};if(s(p,w),w.prototype=p.prototype,d.inPlace(w.prototype,["open","send"],"-xhr-",c),u.on("send-xhr-start",function(t,e){r(t,e),i(e)}),u.on("open-xhr-start",r),h){var g=1,x=document.createTextNode(g);new h(a).observe(x,{characterData:!0})}else f.on("fn-end",function(t){t[0]&&t[0].type===m||a()})},{}],7:[function(t,e,n){function r(t){var e=this.params,n=this.metrics;if(!this.ended){this.ended=!0;for(var r=0;r<d;r++)t.removeEventListener(u[r],this.listener,!1);if(!e.aborted){if(n.duration=a.now()-this.startTime,4===t.readyState){e.status=t.status;var i=o(t,this.lastSize);if(i&&(n.rxSize=i),this.sameOrigin){var s=t.getResponseHeader("X-NewRelic-App-Data");s&&(e.cat=s.split(", ").pop())}}else e.status=0;n.cbTime=this.cbTime,f.emit("xhr-done",[t],t),c("xhr",[e,n,this.startTime])}}}function o(t,e){var n=t.responseType;if("json"===n&&null!==e)return e;var r="arraybuffer"===n||"blob"===n||"json"===n?t.response:t.responseText;return h(r)}function i(t,e){var n=s(e),r=t.params;r.host=n.hostname+":"+n.port,r.pathname=n.pathname,t.sameOrigin=n.sameOrigin}var a=t("loader");if(a.xhrWrappable){var c=t("handle"),s=t(8),f=t("ee"),u=["load","error","abort","timeout"],d=u.length,l=t("id"),p=t(11),h=t(10),m=window.XMLHttpRequest;a.features.xhr=!0,t(6),f.on("new-xhr",function(t){var e=this;e.totalCbs=0,e.called=0,e.cbTime=0,e.end=r,e.ended=!1,e.xhrGuids={},e.lastSize=null,p&&(p>34||p<10)||window.opera||t.addEventListener("progress",function(t){e.lastSize=t.loaded},!1)}),f.on("open-xhr-start",function(t){this.params={method:t[0]},i(this,t[1]),this.metrics={}}),f.on("open-xhr-end",function(t,e){"loader_config"in NREUM&&"xpid"in NREUM.loader_config&&this.sameOrigin&&e.setRequestHeader("X-NewRelic-ID",NREUM.loader_config.xpid)}),f.on("send-xhr-start",function(t,e){var n=this.metrics,r=t[0],o=this;if(n&&r){var i=h(r);i&&(n.txSize=i)}this.startTime=a.now(),this.listener=function(t){try{"abort"===t.type&&(o.params.aborted=!0),("load"!==t.type||o.called===o.totalCbs&&(o.onloadCalled||"function"!=typeof e.onload))&&o.end(e)}catch(n){try{f.emit("internal-error",[n])}catch(r){}}};for(var c=0;c<d;c++)e.addEventListener(u[c],this.listener,!1)}),f.on("xhr-cb-time",function(t,e,n){this.cbTime+=t,e?this.onloadCalled=!0:this.called+=1,this.called!==this.totalCbs||!this.onloadCalled&&"function"==typeof n.onload||this.end(n)}),f.on("xhr-load-added",function(t,e){var n=""+l(t)+!!e;this.xhrGuids&&!this.xhrGuids[n]&&(this.xhrGuids[n]=!0,this.totalCbs+=1)}),f.on("xhr-load-removed",function(t,e){var n=""+l(t)+!!e;this.xhrGuids&&this.xhrGuids[n]&&(delete this.xhrGuids[n],this.totalCbs-=1)}),f.on("addEventListener-end",function(t,e){e instanceof m&&"load"===t[0]&&f.emit("xhr-load-added",[t[1],t[2]],e)}),f.on("removeEventListener-end",function(t,e){e instanceof m&&"load"===t[0]&&f.emit("xhr-load-removed",[t[1],t[2]],e)}),f.on("fn-start",function(t,e,n){e instanceof m&&("onload"===n&&(this.onload=!0),("load"===(t[0]&&t[0].type)||this.onload)&&(this.xhrCbStart=a.now()))}),f.on("fn-end",function(t,e){this.xhrCbStart&&f.emit("xhr-cb-time",[a.now()-this.xhrCbStart,this.onload,e],e)})}},{}],8:[function(t,e,n){e.exports=function(t){var e=document.createElement("a"),n=window.location,r={};e.href=t,r.port=e.port;var o=e.href.split("://");!r.port&&o[1]&&(r.port=o[1].split("/")[0].split("@").pop().split(":")[1]),r.port&&"0"!==r.port||(r.port="https"===o[0]?"443":"80"),r.hostname=e.hostname||n.hostname,r.pathname=e.pathname,r.protocol=o[0],"/"!==r.pathname.charAt(0)&&(r.pathname="/"+r.pathname);var i=!e.protocol||":"===e.protocol||e.protocol===n.protocol,a=e.hostname===document.domain&&e.port===n.port;return r.sameOrigin=i&&(!e.hostname||a),r}},{}],9:[function(t,e,n){function r(){}function o(t,e,n){return function(){return i(t,[f.now()].concat(c(arguments)),e?null:this,n),e?void 0:this}}var i=t("handle"),a=t(12),c=t(13),s=t("ee").get("tracer"),f=t("loader"),u=NREUM;"undefined"==typeof window.newrelic&&(newrelic=u);var d=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],l="api-",p=l+"ixn-";a(d,function(t,e){u[e]=o(l+e,!0,"api")}),u.addPageAction=o(l+"addPageAction",!0),u.setCurrentRouteName=o(l+"routeName",!0),e.exports=newrelic,u.interaction=function(){return(new r).get()};var h=r.prototype={createTracer:function(t,e){var n={},r=this,o="function"==typeof e;return i(p+"tracer",[f.now(),t,n],r),function(){if(s.emit((o?"":"no-")+"fn-start",[f.now(),r,o],n),o)try{return e.apply(this,arguments)}finally{s.emit("fn-end",[f.now()],n)}}}};a("setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(t,e){h[e]=o(p+e)}),newrelic.noticeError=function(t){"string"==typeof t&&(t=new Error(t)),i("err",[t,f.now()])}},{}],10:[function(t,e,n){e.exports=function(t){if("string"==typeof t&&t.length)return t.length;if("object"==typeof t){if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer&&t.byteLength)return t.byteLength;if("undefined"!=typeof Blob&&t instanceof Blob&&t.size)return t.size;if(!("undefined"!=typeof FormData&&t instanceof FormData))try{return JSON.stringify(t).length}catch(e){return}}}},{}],11:[function(t,e,n){var r=0,o=navigator.userAgent.match(/Firefox[\/\s](\d+\.\d+)/);o&&(r=+o[1]),e.exports=r},{}],12:[function(t,e,n){function r(t,e){var n=[],r="",i=0;for(r in t)o.call(t,r)&&(n[i]=e(r,t[r]),i+=1);return n}var o=Object.prototype.hasOwnProperty;e.exports=r},{}],13:[function(t,e,n){function r(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var r=-1,o=n-e||0,i=Array(o<0?0:o);++r<o;)i[r]=t[e+r];return i}e.exports=r},{}],14:[function(t,e,n){e.exports={exists:"undefined"!=typeof window.performance&&window.performance.timing&&"undefined"!=typeof window.performance.timing.navigationStart}},{}],15:[function(t,e,n){function r(t){return!(t&&t instanceof Function&&t.apply&&!t[a])}var o=t("ee"),i=t(13),a="nr@original",c=Object.prototype.hasOwnProperty,s=!1;e.exports=function(t,e){function n(t,e,n,o){function nrWrapper(){var r,a,c,s;try{a=this,r=i(arguments),c="function"==typeof n?n(r,a):n||{}}catch(f){l([f,"",[r,a,o],c])}u(e+"start",[r,a,o],c);try{return s=t.apply(a,r)}catch(d){throw u(e+"err",[r,a,d],c),d}finally{u(e+"end",[r,a,s],c)}}return r(t)?t:(e||(e=""),nrWrapper[a]=t,d(t,nrWrapper),nrWrapper)}function f(t,e,o,i){o||(o="");var a,c,s,f="-"===o.charAt(0);for(s=0;s<e.length;s++)c=e[s],a=t[c],r(a)||(t[c]=n(a,f?c+o:o,i,c))}function u(n,r,o){if(!s||e){var i=s;s=!0;try{t.emit(n,r,o,e)}catch(a){l([a,n,r,o])}s=i}}function d(t,e){if(Object.defineProperty&&Object.keys)try{var n=Object.keys(t);return n.forEach(function(n){Object.defineProperty(e,n,{get:function(){return t[n]},set:function(e){return t[n]=e,e}})}),e}catch(r){l([r])}for(var o in t)c.call(t,o)&&(e[o]=t[o]);return e}function l(e){try{t.emit("internal-error",e)}catch(n){}}return t||(t=o),n.inPlace=f,n.flag=a,n}},{}],ee:[function(t,e,n){function r(){}function o(t){function e(t){return t&&t instanceof r?t:t?s(t,c,i):i()}function n(n,r,o,i){if(!l.aborted||i){t&&t(n,r,o);for(var a=e(o),c=h(n),s=c.length,f=0;f<s;f++)c[f].apply(a,r);var d=u[w[n]];return d&&d.push([g,n,r,a]),a}}function p(t,e){y[t]=h(t).concat(e)}function h(t){return y[t]||[]}function m(t){return d[t]=d[t]||o(n)}function v(t,e){f(t,function(t,n){e=e||"feature",w[n]=e,e in u||(u[e]=[])})}var y={},w={},g={on:p,emit:n,get:m,listeners:h,context:e,buffer:v,abort:a,aborted:!1};return g}function i(){return new r}function a(){(u.api||u.feature)&&(l.aborted=!0,u=l.backlog={})}var c="nr@context",s=t("gos"),f=t(12),u={},d={},l=e.exports=o();l.backlog=u},{}],gos:[function(t,e,n){function r(t,e,n){if(o.call(t,e))return t[e];var r=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return t[e]=r,r}var o=Object.prototype.hasOwnProperty;e.exports=r},{}],handle:[function(t,e,n){function r(t,e,n,r){o.buffer([t],r),o.emit(t,e,n)}var o=t("ee").get("handle");e.exports=r,r.ee=o},{}],id:[function(t,e,n){function r(t){var e=typeof t;return!t||"object"!==e&&"function"!==e?-1:t===window?0:a(t,i,function(){return o++})}var o=1,i="nr@id",a=t("gos");e.exports=r},{}],loader:[function(t,e,n){function r(){if(!b++){var t=x.info=NREUM.info,e=l.getElementsByTagName("script")[0];if(setTimeout(u.abort,3e4),!(t&&t.licenseKey&&t.applicationID&&e))return u.abort();f(w,function(e,n){t[e]||(t[e]=n)}),s("mark",["onload",a()+x.offset],null,"api");var n=l.createElement("script");n.src="https://"+t.agent,e.parentNode.insertBefore(n,e)}}function o(){"complete"===l.readyState&&i()}function i(){s("mark",["domContent",a()+x.offset],null,"api")}function a(){return E.exists&&performance.now?Math.round(performance.now()):(c=Math.max((new Date).getTime(),c))-x.offset}var c=(new Date).getTime(),s=t("handle"),f=t(12),u=t("ee"),d=window,l=d.document,p="addEventListener",h="attachEvent",m=d.XMLHttpRequest,v=m&&m.prototype;NREUM.o={ST:setTimeout,CT:clearTimeout,XHR:m,REQ:d.Request,EV:d.Event,PR:d.Promise,MO:d.MutationObserver};var y=""+location,w={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-1026.min.js"},g=m&&v&&v[p]&&!/CriOS/.test(navigator.userAgent),x=e.exports={offset:c,now:a,origin:y,features:{},xhrWrappable:g};t(9),l[p]?(l[p]("DOMContentLoaded",i,!1),d[p]("load",r,!1)):(l[h]("onreadystatechange",o),d[h]("onload",r)),s("mark",["firstbyte",c],null,"api");var b=0,E=t(14)},{}]},{},["loader",2,7]);</script><script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","queueTime":1,"licenseKey":"1beac94c95","agent":"","transactionName":"NQQGYUZWDUNSVUMPWQxOIkBaVBdZXFgYCUYHDwFRTBkAX0FTGQJcAw8DWlVHE0MdVVgIQgcPEEZRRRVVQRhaD1IGDQFCVUUGCmBCVhJfASILW0BSDURgU0UQUxBPFEdbVAZDQGlFA0cXBBdB","atts":"GUMRFw5MQVNcWEMDWBYSAUdCUhEeUFdUDlMDAwhQFg0FUV9FUkoUAQ4KQVFZF0NWREEDREwCC1tAUg1EbFpSCBRYU1UGDQVPElBZWRJTDBUXUEZBBkIdRlYSXkBbRlQGaFEAAgBgVBgKFQlZFhtBU1xYQwNYFhIBR0JSER5QWVkSUwwVO0FNRwYSCRRDA04WTgxBWVtBHBFVWAhCBw8QRlFFFVVBGFEUWQ8+B1FaFVlWUlpEAxpAAgtARkQGb1pSFVwUAQ4RR0dSTkYCDGIkdUkiNGZ3BFIHHgQHVx1QUVUDYwVBHBFZRQEUWEMxd3cVTxJQWVkSUwwVF1BGQQZCHVpYBV0HBUYPQEUWVU5L","applicationID":"3415687","errorBeacon":"bam.nr-data.net","applicationTime":18}</script>

  <title>CS 317 Assignment 2</title>
</head>

<body>
  <h1>A Scaled Down Domain Name System (DNS) Resolver Client</h1>

  <div class="due">
    <h2>Due Date</h2>Sunday March 12, 23:59.<br>  Late penalty:
    33.333% per day (pro-rated by the minute) to a maximum of 2
    days. Assignments not accepted after 2 days.<br> Y Assignments may
    be done in groups of 2 and all assignments done in groups will be awarded small
   number of bonus marks. It is highly-highly  recommended that you work with a partner as 
this assignment is more work than A1.
  </div>

  <div class="due">
    <h2>SPECIAL NOTE</h2>You are not permitted to use any built-in
    or Java library methods to convert domain names to IP
    addresses. You are allowed to use the static method getByName()
    of the class InetAddress with a dotted IP address (e.g.
    124.231.71.2) to get an InetAddress object for use with the
    routines for sending and receiving datagrams or to extract the dotted IP address for 
    printing. You can also use InetAddress.getByAddress().
  </div>

  <h2>Revision notes</h2>
  <ul>
    <li>March 10- When printing the <em>Answers</em>, <em>Nameservers</em>,
      and Additional Information lines  add a blank after <em>Answer</em>,
      <em>Nameservers</em>, and <em>Additional Information</em> and before the number.
    </li><li>
      March 3 - When printing out the query include the query type - see the
      udpated description within the assignment.
    </li><li>Feb 23 - Updated the error codes to report by adding in error code 6 to deal with the 
        situation when an authoritative response is returned, there is no error, but it has no answer.
    </li><li>Feb 23 - Corrected the range for the query identifier to be from 0 to 65535 inclusive.</li>
  </ul>

  <div class="goals">
    <h2>Goals</h2>

    <ul>
      <li>To learn how to use, in Java, UDP.</li>

      <li>To study and understand the implementation of the DNS
      protocol</li>

      <li>To learn how to read and implement a well specified
      protocol.</li>

      <li>Improve your programming and debugging skills as they
      relate to the use of datagrams in Java</li>

      <li>Develop general networking debugging skills</li>

      <li>Develop an understanding of how to send and receive
      binary data.</li>
    </ul>
  </div>

  <h2>Special Note</h2>All assignments in this course must compile
  and run on the Linux undergrad servers provided for student use.
  If you use a different environment be sure to check that your
  solution works on the ugrad machines as you will be graded on how
  it works on the department machines not on your own machine. All
  instructions for accessing code, building programs, using source
  code control tools etc, assume you are working on these machines.
  If you are working in a different environment commands and
  parameters may be different. Given the diverse collection of
  machines it is not possible for us to provide instructions and
  guidance on how to use these tools or their analogues across
  these varied environments. <b>Pleas for leniency or special
  consideration of the nature "But it works on my laptop under
  ...." will not be entertained,</b> so make sure it works on the
  undergraduate Linux servers and allow time for testing in that
  environment so that you are confident your code works as expected.

  If your program does not compile and produce an executable by
  typing make in the type level directory it will be awarded 0, regardless
  of any work you may have done. 

  <h2>Assignment Overview</h2>

  <p>In this assignment you will be using Java and UDP datagrams to
  implement a scaled back DNS resolver client. Your client will be
  required to interact with various DNS servers to resolve a domain
  name (e.g. www.cs.ubc.ca) into an IP address. Depending upon the command 
line options provided your client is 
  to resolve names to IPV4 or IPV6 addresses.</p>

  <p>Your program will be run at the command line by doing</p>

  <p><tt>java -jar DNSlookup.jar <em>rootDNS name
  [-6|-t|-t6|]</em></tt>.<br></p>

  <ol>
    <li>rootDNS - this is the IP address (in dotted form) of the
      DNS server you are to start your search at. It may or may not be
      a root DNS server.
    </li>

    <li>name - this is the fully qualified domain name you are to
    lookup.</li>
    <li>-6 - This option indicates that the IPV6 address for a name is to be 
             retrieved. The default is to retrieve the IPV4 address for a name. 
    </li><li>-t - This option specifies that the program is to print a
    trace of all the queries made and responses received and then the result. (In trace 
    mode if a query is resent because of a timeout the resent query is 
    printed.) 
    </li><li>-t6 - This option indicates that a lookup for an IPV6 address is to be performed as well as doing the trace.


  </li></ol>
 The result of the lookup is to print the  <em>name</em>, a space,  its time to
    live, 3 spaces, the type, a space,  and the resolved IP address. If the address is an 
    IPV4 address the type is printed as A, and if it is an IPV6 address the type is printed as AAAA.

  <p>If any errors are detected with the command line options the
  program is to print the following and then exit:</p>
  <pre>          Usage: java -jar DNSlookup.jar rootDNS name [-t]
          where
              rootDNS - the IP address (in dotted form) of the root
                        DNS server you are to start your search at
              name    - fully qualified domain name to lookup
              -6      - return an IPV6 address
              -t      - trace the queries made and responses received
              -t6     - return and IPV6 address and trace all the queries made and responses received.
          
</pre>Note to facilitate automated testing the output of your
program must be exactly as specified. Don't go adding extra
information etc and in particular make sure your program is not
interactive.

  <h2>Program Output</h2>This section describes the format of the
  various types of output.

  <h3>Normal output</h3>

  <ol>
    <li>If the IP address is found and the -t option is absent then
    the output format is:
      <pre>    name_being_looked_up TTL ADDRESS_TYPE IP_address
    
</pre>

      <p>Sample output:</p>
      <pre>         
    www.cs.ubc.ca 3585   A 142.103.6.5  
    
      </pre>
      Sometimes multiple IP addresses will be returned for a single name.
      In that case you are to print each of them. For example www.stanford.edu
      might print something like:
   <pre>    www.stanford.edu 60     A 52.32.123.204
    www.stanford.edu 60     A 52.26.62.109
    www.stanford.edu 60     A 52.37.14.176
   </pre>
The printing of an IPV6 result would look like the following:
<pre>    www.microsoft.com 20    AAAA 2600:1409:a:198:0:0:0:747
    www.microsoft.com 20    AAAA 2600:1409:a:1a3:0:0:0:747
</pre>
 (Yes the two addresses are different, look at the 5th grouping of numbers.)
    </li>

    <li>If the IP address is <b>NOT</b> found (RCODE of 3) and the -t or -t6  option is
    absent then the output format is:
      <pre>    name_being_looked_up -1 0.0.0.0
    
</pre>

      <p>Sample output:</p>
      <pre>         
    blueberry.ubc.ca -1   A 0.0.0.0
    
</pre>
    </li>
  </ol>

  <h3><a name="errorCodes" id="errorCodes"></a>Error returns</h3>

  <p>The sample output in the previous section provides an example
  of the format the output of a failed lookup can take. As with all
  failed lookups the result is reported as:</p>
  <pre>    name_being_looked_up TTL A IP_address
</pre>with special values being used for the TTL and IP_address
fields when an error is detected. For all errors the IP address is
to be reported as 0.0.0.0 and the TTL value is to be negative. The
allowed TTL values for a failed lookup are:

  <ul>
    <li>-1 : This is used when the name server explicitly reports a
    value of 3 in the RCODE of the header.</li>

    <li>-2 : The lookup times out.</li>

    <li>-3 : Too many queries are attempted without resolving the
    address.</li>

    <li>-4 : Any other errors that result in an address not being
    resolved. Examples would include things like getting a 5 back
    in the RCODE.</li>

    <li>-6 : This is a pseudo error in the sense that an authoritative response is 
    returned, the RCODE is 0 (meaning there is no error), but there is no answer in the answer field. This typically occurs when the 
    name exists, but there is no coresponding matching IP address. A scenario that can generate this is 
    when you do an IPV6 lookup of a name that has an IPV4 address but not an IPV6 address.
  </li></ul>

  <p>Note that if the provided name is an alias for another name
  (e.g. prep.ai.mit.edu is an alias for ftp.gnu.org) then the
  program is to resolve the CNAME and return the IP address of the
  CNAME or a failure if the CNAME cannot be resolved. A CNAME may
  itself point to another CNAME and so-on. To avoid infinite loops
  when doing these sorts of lookups, you can assume that if your
  program has issued 30 queries then the name cannot be resolved.
  At this point your program will report that the name was not
  found  and the programs return value will be -3. <a name="cnameTTL" id="cnameTTL"></a> Also note that when dealing with a CNAME there
  are two or more TTL
  result fields that need to be considered. For example the inital
  result record that reports something as a CNAME will have a
  particular TTL value. In addition the final address record will
  also have a TTL value. In this situation you are to report the
  TTL of the address reported.
</p>

  <h3>Output when tracing</h3>

There are additional tabs in the edX section for this assignment that provide some 
additional sample output. The output of your progam is to follow that of the sample
  output. Pay particular attention to indentation and column
  spacing. When tracing the basic rules for printing the response
  to each query are as follows:

  <ol>
    <li>For each query that is sent  start by printing 2 blank lines.
      If a query is repeated because of a timeout the query is to be
      reprinted at the time of the timeout. Note that a resent query 
      will have the same query ID.</li>

    <li><a name="qidSpacing" id="qidSpacing"></a>Print the phrase
    "Query ID" followed by 5 spaces, then the query ID itself, a
      space, the name being looked up, two spaces then, the query type (either A
      or AAAA), a space, "--&gt;", another
    space and finally the IP address of the DNS server being
    consulted.</li>

    <li>The next line is the the phrase "Response ID:", a space,
    the ID of the response, a space, the word Authoritative, a
    space, and the word true or false to indicate if this response
      is authoritative or not.     </li>

   
    
    
    <li>The next line consists of 2 spaces, the word <b>Answers</b>,
    followed by a space and the the number of response records in the answer.</li>

    <li>For each response record you are to print the records Name,
    followed by its time-to-live, record type in (one of A, AAAA,
    CN, NS, or else the type number) followed by the type value.
    The formatting of the value depends upon its type. Below you
    can find a format string that you can use with the format
    method to achieve the formatting required when printing a
    resource record.</li>

    <li>Repeat steps 4 and 5 but replace <b>Answers</b> with
    <b>Nameservers</b>, and <b>Additional Information</b>, respectively</li>
  </ol>To get the output to match the sample output you may find the
  following format code useful:<br>
  <pre><tt>            System.out.format("       %-30s %-10d %-4s %s\n", recordName, ttl, recordType, recordValue);
         </tt>
</pre>

  <h2>Implementation Constraints and Suggestions</h2>

  <ol>
    <li>Although the default port for DNS is 53 you might want to
    try composing queries and sending them to a different port that
    has the netcat programming listening on it. By having netcat
      save the the sent data to a file you can then examine it for correctness.</li>

    <li>Similarly you can have netcat send a response to your
    program. There are some .bin files in this assignment's section on 
   edX that might be helpful.
       The files are all in binary
      so you can't just view them in an editor or print them to the screen.
      To print the contents in a human readable form you can try the
      command  <b>hexdump -C fname</b>, where fname is the name of the
      file whose contents you want printed.
    </li>


    <li>You can use Wireshark to see exactly what is being sent and
      what is coming back.


    
    </li><li>You can use any root name server you want, but one that is
    near UBC is 199.7.83.42. A list of root name servers can be
    found <a href="https://www.iana.org/domains/root/servers">here.</a></li>

    
    <li>Use the Random class to get a random number generator to
    use when creating the query ID. Your program must use a
    different query ID for each query of a name server. (i.e. if a
    capture of the DNS queries is done all the query IDs are to be
    different except in very rare cases.) The query ID must be a
    positive value in the range 0 to 65535 (0x00FFFF). When printing the query ID, it must be 
    printed as a positive value.</li>

    <li>Your program is to follow an iterative query process to
    resolve a name. That means you are never to send a query
    requesting a recursive lookup. However when initially debugging
    you may want to send a recursive query to a local name server
    (e.g. 142.103.6.6) so that you can debug response
    processing.</li>

    <li>UDP is unreliable. If you send a query and don't get a
    response in 5 seconds you are to resend the query to the same
    name server. If you still don't get a response you are to
    indicate that the name could not be looked up by reporting a
    TTL of -2 and host ID of 0.0.0.0</li>

    <li>Here are some names to try looking up along with some
    comments:

      <ol>
        <li>www.cs.ubc.ca - just an ordinary request</li>

        <li>blueberry.ubc.ca - no such host</li>

        <li>prep.ai.mit.edu - is an alias for ftp.gnu.org</li>

        <li>finance.google.ca - lots of CNAMEs for both the host
        and name servers.</li>

        <li>groups.yahoo.com - Interesting entries in the alternate
        information section.</li>

        <li><a name="testNames" id="testNames"></a>loop1.csproject.org or loop2.csproject.org
        - This is a pair of cnames that reference each other and
        produce a lookup loop.</li>
<!--
        <li>cs317example.mooo.com - A cname with a shorter TTL than
        the final address.</li>
-->
      </ol>
    </li>

    <li>You probably want to have objects to hold DNS responses and
    Response Records (RR). These will hold the data of interest but
    they will also be objects you can query. For example you might
    have a method on a response object that you can call to see if
    you got an IPV4 or IPV6 address as an answer.</li>

    <li>Sections 3 and 4 of the RFC are the most relevant.</li>

    <li>With respect to processing you must be able to skip over
    all possible types of resource records but you only need to be
    able to extract useful information from A (3.4.1), CNAME
    (3.3.1), and NS (3.3.11) and AAAA (IPV6 address) record types.
    Note that the AAAA record type isn't listed in RFC 1035, but in
    <a href="https://tools.ietf.org/html/rfc3596">RFC 3596</a>. All
    you really need to know is that for the AAAA type the decimal
    value is 28 and IPV6 addresses are 16 byte longs. You can use
    the same methods you use with IPV4 address to get a printable
    string of the address.</li>

    <li>Make sure you understand message compression (Section 4.1.4 in the RFC and 
    the response decoding document on Connect). You won't get very
    far in decoding names without this part working correctly. Note
    that a compressed path can itself reference another compressed
    path. For example remote.ugrad.cs.ubc can reference
    ugrad.cs.ubc.ca which could reference cs.ubc.ca</li>

    <li>Although the additional information section can contain
    useful information, the only time you have to use it is when
    the answer section has 0 results and you need the address for a
    name server provided in the authority section. In that case you
    need to look for the name of that name server in the Additional
    information section. If you can't find the name then you need
    to start a new query to get the IP address of the name server
    before continuing with the original lookup.</li>

   <li>One thing to keep in mind is that when communicating with a name server 
you will always be using an IPV4 address even if you are doing a
     lookup for an IPV6 address. This means that if you ever need to
     get an IP address for a nameserver you will need to do IPV4
     lookup for the nameserver address even if you are looking for an
     IPV6 address. It also means that once you have the IPV4 address
     of the nameserver you will need to make sure that the queries to
     that server are for an IPV6 name if you are doing and IPV6
     lookup. </li>
   <li>You can assume that no query is longer than 512 bytes and a
   response isn't larger than 1024 bytes. However,
   when sending a query you must send the exact number of bytes in the
   query. That is, if the query takes up 100 bytes send 100 bytes exactly. If
   you send more than that some servers won't respond.
   </li><li>Multiple runs of the same query can produce different,
   legitimate, results. Typically TTL values will change and sometimes
   even the IP addresses and the order of IP addresses will change. 
  </li></ol>

  <p>You may discuss this assignment with your classmates, but you
  must do your work only with your partner. You are not allowed to
  show your code, even for discussion or explanatory purposes to
  other classmates.</p>

  <p>Your code is to be developed for the Undergrad Linux server
  machines (e.g. remote.ugrad.cs.ubc.ca). The TAs will test your
  code on these machines, so test your program extensively in this
  environment, <em>including your Makefile</em>.</p>

  <p>Your prrogram will be marked on both functionality and 
  and general style and structure rules. THe criteria relating to style and
  structure is on edX.
  The functionality of your program will be asseessed based on how much of the 
assignments functionality it achieves. 


  </p><h2>What to Hand In</h2>

  <p>You are to use git to handin all materials for this
  assignment. The last push of your repo is what will be marked.
  Any late penalty will be computed based on the time of your last
  push. Any commits pushed after the 48-hour deadline for late
  submissions will be ignored. If you make a mistake and want a
  different push or branch of the repo marked there will be a 15%
  penalty.</p>

  <p>Make sure your git repository on the department stash server
  has the version of the following files:</p>

  <ul>
    <li>A <em>README.txt</em> file that contains any information
    you would like to convey to the TAs about your assignment. For
    example maybe you didn't get some part of the assignment
    working, or it works in some circumstances but not others. If
    you have no comments you can leave the file empty or remove it
    from your repository. The contents of the file must be plain
    text ASCII that is easily viewable using more on the ugrad
    Linux machines. As such, limit your lines to 80 characters. If
    you are using windows or a mac make sure that the format
    makes sense on the Linux machines.</li>

    <li>All  the java files required to build your version of
    DNSlookup.jar. Don't forget to use the git add command to
    include any new or updated files to the list of files to commit
    before pushing.</li>

    <li>A Makefile such that when the TA types <tt>make</tt> a
    binary file named <tt>DNSlookup.jar</tt> is built. The jar file
    must end up in the same directory as the makefile is (i.e. the
    home directory of your assignment). Note, this does not have to
    be a complicated makefile and it is acceptable for the makefile
    to always rebuild the program regardless of whether or not they
    are out-of-date with respect to their source files. Aa Makefile that should provides this basic
    functionality has been provided, <b>DO NOT BREAK IT!</b></li>
  </ul>

  <h2>Git</h2>Everyone is required to use a GIT repository on the
  department's stash server to manage the source code for this
  assignment and to hand the final version in. Furthermore, you are
  required to regularly ``push'' your changes to the server. (Marks
  may be awarded for doing this.) The only branch that will be marked is the master  branch. Regquests to mark a different branch will 
  be assessed a penalty. 


</body></html>